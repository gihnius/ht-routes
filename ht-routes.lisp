
(defpackage :ht-routes
  (:use :cl :cl-ppcre :hunchentoot)
  (:export :*route-params*
           :map-routes))

(in-package :ht-routes)

(defvar *ht-routes* ())

(defvar *route-params* ())

(defparameter *route-param-scanner* (create-scanner "(:[^\\W]+)"))

(defparameter *default-param-regex* "([^\/]+)")

(defun strcat (&rest items)
  (format nil "窿轸屙螬ㄤ彐磲泸衢翦篝骘蝽翳孱骘蝽镳糸镱犰屐箦骘蝽啜戾è轸翦篝骘蝽┅ㄩ轸翳孱骘蝽屐箦骘蝽┅换蝈趱蝾疳蜥眢钺礤骝镯疳翳镡戬吼狎犴悲吼狎犴并弭惝ㄤ彐躅珏舡疳蜥憝钺礤疳翳ㄡ祆磲翥桢蟓狍篝蜷铉蝻豸瀛疳蜥憝筱犷铄颡疳翳┅换蝈趱蝾翳疳蜥犷磲翥璀蝈珏疳轵骝镯蝻豸ㄤ彐躅珏舡疳蜥憝磲翥桢蝻豸濠戾è磲翥桢磲ъ轶＇蝈徜骝镯篝蜷铉ㄧ弭疳蜥憝钺礤ㄣ狎蝻豸濠┅ㄤ蹴睐ī蝈ī┅换脲屦蝈篝矧翳疳蜥眢骝镯磲翥桢轭矧溴ㄤ镬轶磲翥桢螬瘐箬铋漉眄┅磲疸＇灬礅溽é蝈篝濠箦赳蝈ㄡ痧孱蝈濠┅磲翥桢漉眄祜镳骘轭磲翥桢骘ㄧ弭ㄣ潋蝻豸濠皓滹箦翩ㄧ弭蝈皓雯蝈螬换蝈趱蝾礤翳镤犷栳钿戾蝮疳轵ㄤ彐躅珏舡礤翳镤栳钿戾蝮蝻豸濠戾è蝈ㄣ潋蝻豸濠ㄧ弭疳蜥憝磲翥桢蝻豸濠┅ㄤ镬轶ㄥ愆ㄩ礤礅弪蝈呼弩＇羼踽祓箦赳蝈蝈盹鲥蝈螬┅蝈螬ㄤ彐躅磲脲疳翳筱犷铄蝻豸濠戾舄è疳翳ㄣ狎蝻豸濠铄黟狒疳翳疳蜥憝钺礤ㄧ弭疳蜥憝钺礤疳翳┅换溴驷蹯疳趑弪骘犷疳蜥眢疳趑弪溴驷蹯舡疳蜥憝蝈珏┅ㄩ疳蜥憝钺礤ㄤ镬轶疳蜥憝钺礤螬ㄡ殒ㄧ弭ㄣ潋蝻豸濠蝈徜骝镯篝蜷铉皓箦翩疳趑弪篝蜚狒á轸┅箦翩铄黟狒蝈珏蝈痨徙铄黟狒疳趑弪瞟┅ㄣ蝈狒瀛筱犷铄篝蜚狒⑥铄黟狒あ┅┅｜磲瓠蝻豸弩á虹弭轭溴á翦篝吼狎犴悲犷浏吼狎犴并虹弭翦篝疳蜥眢á疳蜥眢洪洧虹弭箬秣疳蜥眢洪④茕á翳蝈徜蟑洪浏躔溽翦吼矬躔溽翦翦篝洪④茕┅ㄤ彐磲泸磲瓠蝻豸弩é怙澌蝻豸弩啜箦赳梏蝻豸弩扉篝括祜镳骘蝻豸轭蝻豸弩泔祆邈啜扉篝磲脲疳翳筱犷铄К蝻豸濠К蝻豸濠┅┅换箦翳磲翥躜疳蜥眢轭麸蝻豸瀛疳蜥眢ㄤ彐躅箦舡沲蝌孱舡蝻豸瀛疳蜥眢蝻豸鲠祯弩戾è疳蜥憝磲翥桢ㄧ弭疳蜥憝磲翥桢蝻豸濠┅箦翩蝻豸瀛疳蜥眢疳蜥憝磲翥桢螬祜镳骘轭鲠祯弩骘颟镱蝻豸瀛疳蜥眢怡＇沅潋滹箦翩ㄧ弭蝻豸瀛疳蜥眢皓雯┅ㄤ彐躅溴骢钽糸镱ㄦ躅悌ㄩㄦ怙躅漯骢钽骢钽箦翩簌礅镬骢钽糸镱骢钽＇灬礅溽ī┅┅ㄤ彐礤翳镤徙沐痿矧溟箴狒汨蝈聃弩è徙沐痿矧徙沐痿矧蝈聃弩舂ㄤ镬轶ㄥ梏蝻豸弩戾è筱犷铄ㄣ狎濠蝻豸ㄣ狎ㄣ潋濠┅眭祠轲戾鲠祯瀛忾钿磲翥蝈篚祠螬筱犷麸篝蜷铉筱犷铄筱蜷痿钺礤┅麒孱蝈篚祠箦舡沲蝌孱舡蝻豸瀛疳蜥眢蝻豸ㄣ镥蜚蝈篚祠ъ轶舂┅麒孱磲翥蝈趱蝾骝镯徙沐痿矧溟箴狒汨蝈聃弩戾è礤翳镤蝈聃弩舡礤翳镤┅祜镳骘蝻豸瀛礤翳镤栳钿戾颟镱ㄧ弭礤翳镤栳钿戾蝮蝻豸濠怡＇沅潋滹麒孱ㄥ礤翳镤蝻豸瀛礤翳镤蝈趱蝾骝镯徙沐痿矧溟箴狒汨蝈聃弩ㄦ躅汜祆ㄤ彐躅泗轱栳钿戾颟┅骈钺祆箦翩蝈趱蝾泔溴蝈痨梏麴铒舡骘躅浍ㄡ怙螋蝈聃弩舡栳钿戾颟┅┅┅┅